<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otel Y√∂netim Sistemi - Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // SUPABASE CONFIGURATION
        const SUPABASE_URL = 'https://eecjimwhcenxyrtepuph.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVlY2ppbXdoY2VueHlydGVwdXBoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAzNTMxMjYsImV4cCI6MjA4NTkyOTEyNn0.OVezVlmS166fajXesj0v2rTSyZlW6VNCnyjJPisbwtc';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // CONSTANTS
        const DEPARTMENTS = [
            'Yemek ve ƒ∞√ßecek',
            'Temizlik',
            '√ñn B√ºro',
            'Misafir ƒ∞li≈ükileri',
            'G√ºvenlik ve Cankurtaran',
            'Teknik Servis',
            'Animasyon ve Eƒülence',
            'Diƒüer'
        ];

        // UTILITIES
        const isOverdue = (feedback) => {
            if (feedback.type !== 'complaint' || feedback.status !== 'open') return false;
            const feedbackDate = new Date(feedback.date);
            const today = new Date();
            const diffDays = Math.ceil((today - feedbackDate) / (1000 * 60 * 60 * 24));
            return diffDays > 1;
        };

        const getOverdueDays = (feedback) => {
            const feedbackDate = new Date(feedback.date);
            const today = new Date();
            return Math.ceil((today - feedbackDate) / (1000 * 60 * 60 * 24));
        };

        const formatDate = (dateString) => {
            const date = new Date(dateString);
            return date.toLocaleDateString('tr-TR', { day: 'numeric', month: 'long', year: 'numeric' });
        };

        // EXCEL EXPORT
        const exportToExcel = (feedbacks, filters) => {
            const data = feedbacks.map(fb => ({
                'Tarih': fb.date,
                'Tip': fb.type === 'complaint' ? '≈ûikayet' : 'Olumlu',
                'Departman': fb.department,
                'Ba≈ülƒ±k': fb.title,
                'A√ßƒ±klama': fb.description,
                'Misafir': fb.guest_name,
                'Oda': fb.room_number,
                'Durum': fb.status === 'open' ? 'A√ßƒ±k' : 'Kapalƒ±',
                'Gecikme': isOverdue(fb) ? `${getOverdueDays(fb)} g√ºn` : '-',
                'Kaydeden': fb.created_by
            }));

            const ws = XLSX.utils.json_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "Geri Bildirimler");
            XLSX.writeFile(wb, `otel-geri-bildirim-${new Date().toISOString().split('T')[0]}.xlsx`);
        };

        // PDF EXPORT (geli≈ütirilmi≈ü)
        const generatePDFReport = (feedbacks, filters, stats) => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Ba≈ülƒ±k
            doc.setFontSize(24);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(20, 40, 100);
            doc.text('OTEL GERƒ∞ Bƒ∞LDƒ∞Rƒ∞M RAPORU', 105, 25, { align: 'center' });

            // Alt ba≈ülƒ±k
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(100, 100, 100);
            const today = new Date().toLocaleDateString('tr-TR');
            doc.text(`Rapor Tarihi: ${today}`, 105, 32, { align: 'center' });

            // √ñzet kutu
            doc.setFillColor(20, 40, 100);
            doc.rect(14, 40, 182, 35, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('√ñZET ƒ∞STATƒ∞STƒ∞KLER', 105, 48, { align: 'center' });

            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            const y1 = 56;
            doc.text(`Toplam: ${stats.total}`, 25, y1);
            doc.text(`≈ûikayet: ${stats.complaints}`, 70, y1);
            doc.text(`Olumlu: ${stats.positive}`, 115, y1);
            doc.text(`A√ßƒ±k: ${stats.open}`, 160, y1);
            
            if (stats.overdue > 0) {
                doc.setTextColor(255, 200, 0);
                doc.text(`‚ö† Geciken: ${stats.overdue}`, 25, y1 + 8);
            }

            // Tablo
            doc.setTextColor(0, 0, 0);
            const tableData = feedbacks.map(fb => [
                fb.date,
                fb.type === 'complaint' ? '≈ûikayet' : 'Olumlu',
                fb.department.substring(0, 18),
                fb.title.substring(0, 35),
                fb.guest_name,
                fb.room_number,
                fb.status === 'open' ? 'A√ßƒ±k' : 'Kapalƒ±',
                isOverdue(fb) ? `${getOverdueDays(fb)}g` : '-'
            ]);

            doc.autoTable({
                head: [['Tarih', 'Tip', 'Departman', 'Ba≈ülƒ±k', 'Misafir', 'Oda', 'Durum', 'Gecikme']],
                body: tableData,
                startY: 85,
                styles: { fontSize: 7, cellPadding: 2 },
                headStyles: {
                    fillColor: [20, 40, 100],
                    textColor: [255, 255, 255],
                    fontStyle: 'bold'
                },
                alternateRowStyles: { fillColor: [245, 247, 250] },
                didParseCell: function(data) {
                    if (data.column.index === 7 && data.cell.text[0] !== '-') {
                        data.cell.styles.textColor = [220, 38, 38];
                        data.cell.styles.fontStyle = 'bold';
                    }
                    if (data.column.index === 1 && data.cell.text[0] === '≈ûikayet') {
                        data.cell.styles.textColor = [220, 38, 38];
                    }
                    if (data.column.index === 1 && data.cell.text[0] === 'Olumlu') {
                        data.cell.styles.textColor = [34, 197, 94];
                    }
                }
            });

            doc.save(`otel-rapor-${today}.pdf`);
        };

        // CHART COMPONENT
        function ChartComponent({ type, data, chartId, title }) {
            const chartRef = useRef(null);
            const chartInstanceRef = useRef(null);

            useEffect(() => {
                if (!chartRef.current) return;

                if (chartInstanceRef.current) {
                    chartInstanceRef.current.destroy();
                }

                const ctx = chartRef.current.getContext('2d');

                if (type === 'bar') {
                    chartInstanceRef.current = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: data.map(d => d.name),
                            datasets: [
                                {
                                    label: '≈ûikayet',
                                    data: data.map(d => d.complaints),
                                    backgroundColor: 'rgba(239, 68, 68, 0.8)',
                                    borderColor: 'rgb(239, 68, 68)',
                                    borderWidth: 1
                                },
                                {
                                    label: 'Olumlu',
                                    data: data.map(d => d.positive),
                                    backgroundColor: 'rgba(34, 197, 94, 0.8)',
                                    borderColor: 'rgb(34, 197, 94)',
                                    borderWidth: 1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'top' },
                                title: { display: false }
                            },
                            scales: {
                                x: { ticks: { maxRotation: 45, minRotation: 45 } },
                                y: { beginAtZero: true }
                            }
                        }
                    });
                } else if (type === 'pie') {
                    chartInstanceRef.current = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: data.map(d => d.name),
                            datasets: [{
                                data: data.map(d => d.value),
                                backgroundColor: data.map(d => d.color),
                                borderWidth: 2,
                                borderColor: '#fff'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'bottom' },
                                title: { display: false }
                            }
                        }
                    });
                } else if (type === 'line') {
                    chartInstanceRef.current = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: data.map(d => d.date),
                            datasets: [{
                                label: 'Toplam',
                                data: data.map(d => d.count),
                                borderColor: 'rgb(20, 40, 100)',
                                backgroundColor: 'rgba(20, 40, 100, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                title: { display: false }
                            },
                            scales: {
                                y: { beginAtZero: true }
                            }
                        }
                    });
                }

                return () => {
                    if (chartInstanceRef.current) {
                        chartInstanceRef.current.destroy();
                    }
                };
            }, [type, data]);

            return <canvas ref={chartRef}></canvas>;
        }

        // MAIN APP
        function App() {
            const [currentUser, setCurrentUser] = useState(null);
            const [users, setUsers] = useState([]);
            const [feedbacks, setFeedbacks] = useState([]);
            const [currentView, setCurrentView] = useState('dashboard');
            const [filters, setFilters] = useState({
                department: 'all',
                type: 'all',
                dateFrom: '',
                dateTo: '',
                status: 'all',
                search: ''
            });
            const [sortBy, setSortBy] = useState('date');
            const [sortOrder, setSortOrder] = useState('desc');
            const [showModal, setShowModal] = useState(false);
            const [modalType, setModalType] = useState('');
            const [editingItem, setEditingItem] = useState(null);
            const [loading, setLoading] = useState(false);

            const loadData = async () => {
                try {
                    setLoading(true);
                    
                    const { data: usersData, error: usersError } = await supabase
                        .from('users')
                        .select('*')
                        .order('id', { ascending: true });
                    
                    if (usersError) throw usersError;
                    setUsers(usersData || []);

                    const { data: feedbacksData, error: feedbacksError } = await supabase
                        .from('feedbacks')
                        .select('*')
                        .order('created_at', { ascending: false });
                    
                    if (feedbacksError) throw feedbacksError;
                    setFeedbacks(feedbacksData || []);
                } catch (error) {
                    console.error('Veri y√ºkleme hatasƒ±:', error);
                    alert('Veriler y√ºklenirken hata olu≈ütu: ' + error.message);
                } finally {
                    setLoading(false);
                }
            };

            useEffect(() => {
                loadData();
            }, []);

            const getFilteredFeedbacks = () => {
                let filtered = feedbacks.filter(fb => {
                    if (filters.department !== 'all' && fb.department !== filters.department) return false;
                    if (filters.type !== 'all' && fb.type !== filters.type) return false;
                    if (filters.status !== 'all' && fb.status !== filters.status) return false;
                    if (filters.dateFrom && fb.date < filters.dateFrom) return false;
                    if (filters.dateTo && fb.date > filters.dateTo) return false;
                    if (filters.search) {
                        const search = filters.search.toLowerCase();
                        return fb.title.toLowerCase().includes(search) ||
                               fb.description.toLowerCase().includes(search) ||
                               fb.guest_name.toLowerCase().includes(search) ||
                               fb.room_number.toLowerCase().includes(search);
                    }
                    return true;
                });

                // Sƒ±ralama
                filtered.sort((a, b) => {
                    let aVal, bVal;
                    if (sortBy === 'date') {
                        aVal = new Date(a.date);
                        bVal = new Date(b.date);
                    } else if (sortBy === 'room') {
                        aVal = parseInt(a.room_number) || 0;
                        bVal = parseInt(b.room_number) || 0;
                    } else if (sortBy === 'status') {
                        aVal = a.status;
                        bVal = b.status;
                    }
                    
                    if (sortOrder === 'asc') {
                        return aVal > bVal ? 1 : -1;
                    } else {
                        return aVal < bVal ? 1 : -1;
                    }
                });

                return filtered;
            };

            const stats = useMemo(() => {
                const filtered = getFilteredFeedbacks();
                const total = filtered.length;
                const complaints = filtered.filter(f => f.type === 'complaint').length;
                const positive = filtered.filter(f => f.type === 'positive').length;
                const open = filtered.filter(f => f.status === 'open').length;
                const closed = filtered.filter(f => f.status === 'closed').length;
                const overdue = filtered.filter(f => isOverdue(f)).length;

                const departmentStats = DEPARTMENTS.map(dept => ({
                    name: dept,
                    complaints: filtered.filter(f => f.department === dept && f.type === 'complaint').length,
                    positive: filtered.filter(f => f.department === dept && f.type === 'positive').length,
                    total: filtered.filter(f => f.department === dept).length
                }));

                // Trend analizi (son 7 g√ºn)
                const trendData = [];
                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];
                    const count = feedbacks.filter(f => f.date === dateStr).length;
                    trendData.push({
                        date: date.toLocaleDateString('tr-TR', { day: 'numeric', month: 'short' }),
                        count
                    });
                }

                // Ortalama yanƒ±t s√ºresi (kapalƒ± ≈üikayetler i√ßin)
                const closedComplaints = feedbacks.filter(f => f.type === 'complaint' && f.status === 'closed');
                const avgResponseTime = closedComplaints.length > 0
                    ? Math.round(closedComplaints.reduce((sum, f) => {
                        const days = Math.ceil((new Date(f.created_at) - new Date(f.date)) / (1000 * 60 * 60 * 24));
                        return sum + Math.abs(days);
                    }, 0) / closedComplaints.length)
                    : 0;

                return { total, complaints, positive, open, closed, overdue, departmentStats, trendData, avgResponseTime };
            }, [feedbacks, filters, sortBy, sortOrder]);

            // LOGIN COMPONENT
            const LoginForm = () => {
                const [username, setUsername] = useState('');
                const [password, setPassword] = useState('');
                const [error, setError] = useState('');
                const [isLoading, setIsLoading] = useState(false);

                const handleLogin = async (e) => {
                    e.preventDefault();
                    setIsLoading(true);
                    setError('');

                    try {
                        const { data, error } = await supabase
                            .from('users')
                            .select('*')
                            .eq('username', username)
                            .eq('password', password)
                            .single();

                        if (error || !data) {
                            setError('Kullanƒ±cƒ± adƒ± veya ≈üifre hatalƒ±!');
                        } else {
                            setCurrentUser(data);
                        }
                    } catch (err) {
                        setError('Giri≈ü yapƒ±lƒ±rken hata olu≈ütu!');
                        console.error(err);
                    } finally {
                        setIsLoading(false);
                    }
                };

                return (
                    <div className="login-page">
                        <div className="login-bg"></div>
                        <div className="login-container">
                            <div className="login-card">
                                <div className="login-logo">
                                    <div className="logo-icon">üè®</div>
                                    <h1>Premium Hotel</h1>
                                    <p>Management System</p>
                                </div>
                                
                                <form onSubmit={handleLogin} className="login-form">
                                    {error && <div className="alert alert-error">{error}</div>}
                                    
                                    <div className="form-group">
                                        <label>Kullanƒ±cƒ± Adƒ±</label>
                                        <input
                                            type="text"
                                            value={username}
                                            onChange={(e) => setUsername(e.target.value)}
                                            placeholder="Kullanƒ±cƒ± adƒ±nƒ±zƒ± girin"
                                            disabled={isLoading}
                                            required
                                        />
                                    </div>

                                    <div className="form-group">
                                        <label>≈ûifre</label>
                                        <input
                                            type="password"
                                            value={password}
                                            onChange={(e) => setPassword(e.target.value)}
                                            placeholder="≈ûifrenizi girin"
                                            disabled={isLoading}
                                            required
                                        />
                                    </div>

                                    <button type="submit" className="btn-login" disabled={isLoading}>
                                        {isLoading ? <span className="spinner"></span> : 'Giri≈ü Yap'}
                                    </button>
                                </form>

                                <div className="login-footer">
                                    <p className="demo-info">Demo Hesaplar</p>
                                    <div className="demo-accounts">
                                        <span>Noxinn Deluxe Hotel</span>
                                        <span>Misafir Geri Bildirim Sistemine Ho≈ügeldiniz.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            if (!currentUser) {
                return <LoginForm />;
            }

            const isAdmin = currentUser.role === 'admin';

            return (
                <div className="app">
                    {/* SIDEBAR */}
                    <aside className="sidebar">
                        <div className="sidebar-header">
                            <div className="logo">
                                <div className="logo-icon">üè®</div>
                                <div>
                                    <h2>Premium Hotel</h2>
                                    <p>Management</p>
                                </div>
                            </div>
                        </div>

                        <nav className="sidebar-nav">
                            <button
                                className={currentView === 'dashboard' ? 'active' : ''}
                                onClick={() => setCurrentView('dashboard')}
                            >
                                <span className="nav-icon">üìä</span>
                                Dashboard
                            </button>
                            <button
                                className={currentView === 'feedbacks' ? 'active' : ''}
                                onClick={() => setCurrentView('feedbacks')}
                            >
                                <span className="nav-icon">üìù</span>
                                Geri Bildirimler
                            </button>
                            <button
                                className={currentView === 'analytics' ? 'active' : ''}
                                onClick={() => setCurrentView('analytics')}
                            >
                                <span className="nav-icon">üìà</span>
                                Analiz & Raporlar
                            </button>
                            {isAdmin && (
                                <button
                                    className={currentView === 'users' ? 'active' : ''}
                                    onClick={() => setCurrentView('users')}
                                >
                                    <span className="nav-icon">üë•</span>
                                    Kullanƒ±cƒ±lar
                                </button>
                            )}
                        </nav>

                        <div className="sidebar-footer">
                            <div className="user-card">
                                <div className="user-avatar">{currentUser.name.charAt(0)}</div>
                                <div className="user-info">
                                    <p className="user-name">{currentUser.name}</p>
                                    <p className="user-role">{isAdmin ? 'Y√∂netici' : 'Personel'}</p>
                                </div>
                            </div>
                            <button className="btn-logout" onClick={() => setCurrentUser(null)}>
                                <span>üö™</span> √áƒ±kƒ±≈ü Yap
                            </button>
                        </div>
                    </aside>

                    {/* MAIN CONTENT */}
                    <main className="main-content">
                        {currentView === 'dashboard' && <DashboardView stats={stats} feedbacks={feedbacks.slice(0, 5)} />}
                        {currentView === 'feedbacks' && (
                            <FeedbacksView
                                feedbacks={getFilteredFeedbacks()}
                                filters={filters}
                                setFilters={setFilters}
                                sortBy={sortBy}
                                setSortBy={setSortBy}
                                sortOrder={sortOrder}
                                setSortOrder={setSortOrder}
                                isAdmin={isAdmin}
                                onAdd={() => { setModalType('feedback'); setEditingItem(null); setShowModal(true); }}
                                onEdit={(item) => { setEditingItem(item); setModalType('feedback'); setShowModal(true); }}
                                onDelete={async (id) => {
                                    if (!confirm('Silmek istediƒüinizden emin misiniz?')) return;
                                    try {
                                        await supabase.from('feedbacks').delete().eq('id', id);
                                        await loadData();
                                    } catch (error) {
                                        alert('Silme hatasƒ±: ' + error.message);
                                    }
                                }}
                                stats={stats}
                            />
                        )}
                        {currentView === 'analytics' && <AnalyticsView stats={stats} feedbacks={feedbacks} />}
                        {currentView === 'users' && isAdmin && (
                            <UsersView
                                users={users}
                                currentUser={currentUser}
                                onAdd={() => { setModalType('user'); setEditingItem(null); setShowModal(true); }}
                                onEdit={(item) => { setEditingItem(item); setModalType('user'); setShowModal(true); }}
                                onDelete={async (id) => {
                                    if (!confirm('Silmek istediƒüinizden emin misiniz?')) return;
                                    try {
                                        await supabase.from('users').delete().eq('id', id);
                                        await loadData();
                                    } catch (error) {
                                        alert('Silme hatasƒ±: ' + error.message);
                                    }
                                }}
                            />
                        )}
                    </main>

                    {/* MODAL */}
                    {showModal && (
                        <Modal
                            type={modalType}
                            item={editingItem}
                            currentUser={currentUser}
                            onClose={() => { setShowModal(false); setEditingItem(null); }}
                            onSave={async (data) => {
                                try {
                                    if (modalType === 'feedback') {
                                        if (editingItem) {
                                            await supabase.from('feedbacks').update(data).eq('id', editingItem.id);
                                        } else {
                                            await supabase.from('feedbacks').insert([{ ...data, created_by: currentUser.username }]);
                                        }
                                    } else {
                                        if (editingItem) {
                                            const updateData = { ...data };
                                            if (!updateData.password) delete updateData.password;
                                            await supabase.from('users').update(updateData).eq('id', editingItem.id);
                                        } else {
                                            await supabase.from('users').insert([data]);
                                        }
                                    }
                                    await loadData();
                                    setShowModal(false);
                                    setEditingItem(null);
                                } catch (error) {
                                    alert('Kaydetme hatasƒ±: ' + error.message);
                                }
                            }}
                        />
                    )}
                </div>
            );

            // DASHBOARD VIEW
            function DashboardView({ stats, feedbacks }) {
                const pieData = [
                    { name: '≈ûikayet', value: stats.complaints, color: '#ef4444' },
                    { name: 'Olumlu', value: stats.positive, color: '#22c55e' }
                ];

                return (
                    <div className="view-container">
                        <div className="view-header">
                            <div>
                                <h1>Dashboard</h1>
                                <p>Genel bakƒ±≈ü ve √∂nemli metrikler</p>
                            </div>
                        </div>

                        <div className="kpi-grid">
                            <div className="kpi-card primary">
                                <div className="kpi-icon">üìä</div>
                                <div className="kpi-content">
                                    <p className="kpi-label">Toplam Kayƒ±t</p>
                                    <h3 className="kpi-value">{stats.total}</h3>
                                    <p className="kpi-sub">Son 30 g√ºn</p>
                                </div>
                            </div>

                            <div className="kpi-card danger">
                                <div className="kpi-icon">‚ö†Ô∏è</div>
                                <div className="kpi-content">
                                    <p className="kpi-label">Aktif ≈ûikayetler</p>
                                    <h3 className="kpi-value">{stats.complaints}</h3>
                                    <p className="kpi-sub">{stats.overdue} gecikmi≈ü</p>
                                </div>
                            </div>

                            <div className="kpi-card success">
                                <div className="kpi-icon">‚ú®</div>
                                <div className="kpi-content">
                                    <p className="kpi-label">Olumlu D√∂n√º≈ü</p>
                                    <h3 className="kpi-value">{stats.positive}</h3>
                                    <p className="kpi-sub">{Math.round((stats.positive / stats.total) * 100)}% oran</p>
                                </div>
                            </div>

                            <div className="kpi-card warning">
                                <div className="kpi-icon">‚è±Ô∏è</div>
                                <div className="kpi-content">
                                    <p className="kpi-label">Ort. √á√∂z√ºm S√ºresi</p>
                                    <h3 className="kpi-value">{stats.avgResponseTime}</h3>
                                    <p className="kpi-sub">g√ºn</p>
                                </div>
                            </div>
                        </div>

                        <div className="charts-row">
                            <div className="chart-card">
                                <h3>Son 7 G√ºn Trend</h3>
                                <div className="chart-container">
                                    <ChartComponent type="line" data={stats.trendData} chartId="trend" />
                                </div>
                            </div>

                            <div className="chart-card">
                                <h3>Daƒüƒ±lƒ±m</h3>
                                <div className="chart-container">
                                    <ChartComponent type="pie" data={pieData} chartId="distribution" />
                                </div>
                            </div>
                        </div>

                        <div className="recent-section">
                            <h3>Son Geri Bildirimler</h3>
                            <div className="feedback-quick-list">
                                {feedbacks.map(fb => (
                                    <div key={fb.id} className={`quick-item ${fb.type} ${isOverdue(fb) ? 'overdue' : ''}`}>
                                        <div className="quick-header">
                                            <span className={`badge badge-${fb.type}`}>
                                                {fb.type === 'complaint' ? '‚ö†Ô∏è ≈ûikayet' : '‚ú® Olumlu'}
                                            </span>
                                            <span className="quick-date">{formatDate(fb.date)}</span>
                                        </div>
                                        <h4>{fb.title}</h4>
                                        <p>{fb.description.substring(0, 100)}...</p>
                                        <div className="quick-meta">
                                            <span>üë§ {fb.guest_name}</span>
                                            <span>üè† Oda {fb.room_number}</span>
                                            <span>üè¢ {fb.department}</span>
                                        </div>
                                        {isOverdue(fb) && (
                                            <div className="overdue-alert">
                                                üö® {getOverdueDays(fb)} g√ºn gecikmi≈ü
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            // FEEDBACKS VIEW
            function FeedbacksView({ feedbacks, filters, setFilters, sortBy, setSortBy, sortOrder, setSortOrder, isAdmin, onAdd, onEdit, onDelete, stats }) {
                return (
                    <div className="view-container">
                        <div className="view-header">
                            <div>
                                <h1>Geri Bildirimler</h1>
                                <p>{feedbacks.length} kayƒ±t g√∂steriliyor</p>
                            </div>
                            <div className="header-actions">
                                <button className="btn btn-secondary" onClick={() => exportToExcel(feedbacks, filters)}>
                                    üìä Excel
                                </button>
                                <button className="btn btn-secondary" onClick={() => generatePDFReport(feedbacks, filters, stats)}>
                                    üìÑ PDF
                                </button>
                                {isAdmin && (
                                    <button className="btn btn-primary" onClick={onAdd}>
                                        ‚ûï Yeni Kayƒ±t
                                    </button>
                                )}
                            </div>
                        </div>

                        <div className="filters-panel">
                            <div className="filter-row">
                                <input
                                    type="search"
                                    placeholder="üîç Ara (ba≈ülƒ±k, a√ßƒ±klama, misafir, oda)..."
                                    value={filters.search}
                                    onChange={(e) => setFilters({...filters, search: e.target.value})}
                                    className="search-input"
                                />
                                
                                <select value={filters.department} onChange={(e) => setFilters({...filters, department: e.target.value})}>
                                    <option value="all">T√ºm Departmanlar</option>
                                    {DEPARTMENTS.map(d => <option key={d} value={d}>{d}</option>)}
                                </select>

                                <select value={filters.type} onChange={(e) => setFilters({...filters, type: e.target.value})}>
                                    <option value="all">T√ºm Tipler</option>
                                    <option value="complaint">≈ûikayet</option>
                                    <option value="positive">Olumlu</option>
                                </select>

                                <select value={filters.status} onChange={(e) => setFilters({...filters, status: e.target.value})}>
                                    <option value="all">T√ºm Durumlar</option>
                                    <option value="open">A√ßƒ±k</option>
                                    <option value="closed">Kapalƒ±</option>
                                </select>

                                <input
                                    type="date"
                                    value={filters.dateFrom}
                                    onChange={(e) => setFilters({...filters, dateFrom: e.target.value})}
                                    placeholder="Ba≈ülangƒ±√ß"
                                />

                                <input
                                    type="date"
                                    value={filters.dateTo}
                                    onChange={(e) => setFilters({...filters, dateTo: e.target.value})}
                                    placeholder="Biti≈ü"
                                />

                                <button
                                    className="btn btn-ghost"
                                    onClick={() => setFilters({ department: 'all', type: 'all', dateFrom: '', dateTo: '', status: 'all', search: '' })}
                                >
                                    ‚úï Temizle
                                </button>
                            </div>

                            <div className="sort-row">
                                <span>Sƒ±rala:</span>
                                <select value={sortBy} onChange={(e) => setSortBy(e.target.value)}>
                                    <option value="date">Tarihe G√∂re</option>
                                    <option value="room">Oda Numarasƒ±na G√∂re</option>
                                    <option value="status">Duruma G√∂re</option>
                                </select>
                                <button
                                    className="btn btn-ghost"
                                    onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}
                                >
                                    {sortOrder === 'asc' ? '‚Üë Artan' : '‚Üì Azalan'}
                                </button>
                            </div>
                        </div>

                        <div className="feedbacks-grid">
                            {feedbacks.map(fb => (
                                <div key={fb.id} className={`feedback-card ${fb.type} ${isOverdue(fb) ? 'overdue' : ''}`}>
                                    {isOverdue(fb) && (
                                        <div className="overdue-ribbon">
                                            üö® {getOverdueDays(fb)} G√úN GECƒ∞KMƒ∞≈û
                                        </div>
                                    )}
                                    
                                    <div className="card-header">
                                        <div className="card-badges">
                                            <span className={`badge badge-${fb.type}`}>
                                                {fb.type === 'complaint' ? '‚ö†Ô∏è ≈ûikayet' : '‚ú® Olumlu'}
                                            </span>
                                            <span className={`badge badge-status-${fb.status}`}>
                                                {fb.status === 'open' ? 'üîì A√ßƒ±k' : '‚úÖ Kapalƒ±'}
                                            </span>
                                            <span className="badge badge-dept">{fb.department}</span>
                                        </div>
                                        {isAdmin && (
                                            <div className="card-actions">
                                                <button className="action-btn" onClick={() => onEdit(fb)}>‚úèÔ∏è</button>
                                                <button className="action-btn danger" onClick={() => onDelete(fb.id)}>üóëÔ∏è</button>
                                            </div>
                                        )}
                                    </div>

                                    <h3 className="card-title">{fb.title}</h3>
                                    <p className="card-description">{fb.description}</p>

                                    <div className="card-footer">
                                        <div className="card-meta">
                                            <span>üë§ {fb.guest_name}</span>
                                            <span>üè† Oda {fb.room_number}</span>
                                        </div>
                                        <div className="card-date">
                                            üìÖ {formatDate(fb.date)}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            }

            // ANALYTICS VIEW
            function AnalyticsView({ stats, feedbacks }) {
                return (
                    <div className="view-container">
                        <div className="view-header">
                            <div>
                                <h1>Analiz & Raporlar</h1>
                                <p>Detaylƒ± performans metrikleri ve trendler</p>
                            </div>
                        </div>

                        <div className="analytics-grid">
                            <div className="analytics-card">
                                <h3>Departman Performansƒ±</h3>
                                <div className="chart-container large">
                                    <ChartComponent type="bar" data={stats.departmentStats} chartId="dept-perf" />
                                </div>
                            </div>

                            <div className="analytics-card">
                                <h3>Departman Detay</h3>
                                <div className="table-container">
                                    <table className="data-table">
                                        <thead>
                                            <tr>
                                                <th>Departman</th>
                                                <th>Toplam</th>
                                                <th>≈ûikayet</th>
                                                <th>Olumlu</th>
                                                <th>Oran</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {stats.departmentStats.filter(d => d.total > 0).map(dept => (
                                                <tr key={dept.name}>
                                                    <td><strong>{dept.name}</strong></td>
                                                    <td>{dept.total}</td>
                                                    <td className="text-danger">{dept.complaints}</td>
                                                    <td className="text-success">{dept.positive}</td>
                                                    <td>
                                                        <div className="progress-bar">
                                                            <div
                                                                className="progress-fill success"
                                                                style={{width: `${(dept.positive / dept.total) * 100}%`}}
                                                            ></div>
                                                        </div>
                                                        <span className="progress-label">
                                                            {Math.round((dept.positive / dept.total) * 100)}%
                                                        </span>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div className="analytics-card full-width">
                                <h3>Haftalƒ±k Trend Analizi</h3>
                                <div className="chart-container large">
                                    <ChartComponent type="line" data={stats.trendData} chartId="weekly-trend" />
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // USERS VIEW
            function UsersView({ users, currentUser, onAdd, onEdit, onDelete }) {
                return (
                    <div className="view-container">
                        <div className="view-header">
                            <div>
                                <h1>Kullanƒ±cƒ± Y√∂netimi</h1>
                                <p>{users.length} kullanƒ±cƒ±</p>
                            </div>
                            <button className="btn btn-primary" onClick={onAdd}>
                                ‚ûï Yeni Kullanƒ±cƒ±
                            </button>
                        </div>

                        <div className="users-grid">
                            {users.map(user => (
                                <div key={user.id} className="user-card-item">
                                    <div className="user-avatar-large">{user.name.charAt(0)}</div>
                                    <div className="user-details">
                                        <h3>{user.name}</h3>
                                        <p>@{user.username}</p>
                                        <span className={`badge badge-${user.role}`}>
                                            {user.role === 'admin' ? 'üëë Y√∂netici' : 'üë§ Personel'}
                                        </span>
                                    </div>
                                    <div className="user-actions">
                                        <button className="action-btn" onClick={() => onEdit(user)}>‚úèÔ∏è</button>
                                        {user.id !== currentUser.id && (
                                            <button className="action-btn danger" onClick={() => onDelete(user.id)}>üóëÔ∏è</button>
                                        )}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            }

            // MODAL
            function Modal({ type, item, currentUser, onClose, onSave }) {
                const [formData, setFormData] = useState(item || (
                    type === 'feedback' ? {
                        type: 'complaint',
                        department: 'Yemek ve ƒ∞√ßecek',
                        title: '',
                        description: '',
                        guest_name: '',
                        room_number: '',
                        date: new Date().toISOString().split('T')[0],
                        status: 'open'
                    } : {
                        username: '',
                        password: '',
                        name: '',
                        role: 'user'
                    }
                ));
                const [saving, setSaving] = useState(false);

                const handleSubmit = async (e) => {
                    e.preventDefault();
                    setSaving(true);
                    await onSave(formData);
                    setSaving(false);
                };

                return (
                    <div className="modal-overlay" onClick={onClose}>
                        <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                            <div className="modal-header">
                                <h2>{item ? 'D√ºzenle' : 'Yeni Ekle'}</h2>
                                <button className="close-btn" onClick={onClose}>√ó</button>
                            </div>

                            <form onSubmit={handleSubmit} className="modal-form">
                                {type === 'feedback' ? (
                                    <>
                                        <div className="form-row">
                                            <div className="form-group">
                                                <label>Tip *</label>
                                                <select value={formData.type} onChange={(e) => setFormData({...formData, type: e.target.value})} required>
                                                    <option value="complaint">≈ûikayet</option>
                                                    <option value="positive">Olumlu D√∂n√º≈ü</option>
                                                </select>
                                            </div>
                                            <div className="form-group">
                                                <label>Departman *</label>
                                                <select value={formData.department} onChange={(e) => setFormData({...formData, department: e.target.value})} required>
                                                    {DEPARTMENTS.map(d => <option key={d} value={d}>{d}</option>)}
                                                </select>
                                            </div>
                                        </div>

                                        <div className="form-group">
                                            <label>Ba≈ülƒ±k *</label>
                                            <input
                                                type="text"
                                                value={formData.title}
                                                onChange={(e) => setFormData({...formData, title: e.target.value})}
                                                required
                                            />
                                        </div>

                                        <div className="form-group">
                                            <label>A√ßƒ±klama *</label>
                                            <textarea
                                                value={formData.description}
                                                onChange={(e) => setFormData({...formData, description: e.target.value})}
                                                rows={4}
                                                required
                                            />
                                        </div>

                                        <div className="form-row">
                                            <div className="form-group">
                                                <label>Misafir Adƒ± *</label>
                                                <input
                                                    type="text"
                                                    value={formData.guest_name}
                                                    onChange={(e) => setFormData({...formData, guest_name: e.target.value})}
                                                    required
                                                />
                                            </div>
                                            <div className="form-group">
                                                <label>Oda No *</label>
                                                <input
                                                    type="text"
                                                    value={formData.room_number}
                                                    onChange={(e) => setFormData({...formData, room_number: e.target.value})}
                                                    required
                                                />
                                            </div>
                                        </div>

                                        <div className="form-row">
                                            <div className="form-group">
                                                <label>Tarih *</label>
                                                <input
                                                    type="date"
                                                    value={formData.date}
                                                    onChange={(e) => setFormData({...formData, date: e.target.value})}
                                                    required
                                                />
                                            </div>
                                            <div className="form-group">
                                                <label>Durum *</label>
                                                <select value={formData.status} onChange={(e) => setFormData({...formData, status: e.target.value})} required>
                                                    <option value="open">A√ßƒ±k</option>
                                                    <option value="closed">Kapalƒ±</option>
                                                </select>
                                            </div>
                                        </div>
                                    </>
                                ) : (
                                    <>
                                        <div className="form-group">
                                            <label>Ad Soyad *</label>
                                            <input
                                                type="text"
                                                value={formData.name || ''}
                                                onChange={(e) => setFormData({...formData, name: e.target.value})}
                                                required
                                            />
                                        </div>

                                        <div className="form-group">
                                            <label>Kullanƒ±cƒ± Adƒ± *</label>
                                            <input
                                                type="text"
                                                value={formData.username || ''}
                                                onChange={(e) => setFormData({...formData, username: e.target.value})}
                                                required
                                            />
                                        </div>

                                        <div className="form-group">
                                            <label>≈ûifre {!item && '*'}</label>
                                            <input
                                                type="password"
                                                value={formData.password || ''}
                                                onChange={(e) => setFormData({...formData, password: e.target.value})}
                                                required={!item}
                                                placeholder={item ? 'Deƒüi≈ütirmek i√ßin girin' : ''}
                                            />
                                        </div>

                                        <div className="form-group">
                                            <label>Rol *</label>
                                            <select value={formData.role || 'user'} onChange={(e) => setFormData({...formData, role: e.target.value})} required>
                                                <option value="user">Personel</option>
                                                <option value="admin">Y√∂netici</option>
                                            </select>
                                        </div>
                                    </>
                                )}

                                <div className="modal-actions">
                                    <button type="button" className="btn btn-secondary" onClick={onClose} disabled={saving}>
                                        ƒ∞ptal
                                    </button>
                                    <button type="submit" className="btn btn-primary" disabled={saving}>
                                        {saving ? <span className="spinner"></span> : (item ? 'G√ºncelle' : 'Kaydet')}
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                );
            }
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <style>
        :root {
            --primary: #14285a;
            --primary-light: #1e3a8a;
            --accent: #d4af37;
            --accent-dark: #b8941f;
            --danger: #ef4444;
            --success: #22c55e;
            --warning: #f59e0b;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-700: #374151;
            --gray-900: #111827;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--gray-50);
            color: var(--gray-900);
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
        }

        /* LOGIN PAGE */
        .login-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .login-bg {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        }

        .login-bg::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%);
            animation: drift 20s ease-in-out infinite;
        }

        @keyframes drift {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(30px, -30px); }
        }

        .login-container {
            position: relative;
            z-index: 1;
            padding: 24px;
            width: 100%;
            max-width: 480px;
        }

        .login-card {
            background: white;
            border-radius: 24px;
            padding: 48px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .login-logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo-icon {
            font-size: 72px;
            margin-bottom: 16px;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .login-logo h1 {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 4px;
            letter-spacing: -0.5px;
        }

        .login-logo p {
            color: var(--gray-700);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-700);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 14px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.1);
        }

        .btn-login {
            padding: 16px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        .btn-login:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }

        .btn-login:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .login-footer {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--gray-200);
            text-align: center;
        }

        .demo-info {
            font-size: 12px;
            color: var(--gray-700);
            margin-bottom: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .demo-accounts {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 13px;
            color: var(--gray-700);
        }

        .alert {
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
        }

        .alert-error {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid var(--danger);
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* APP LAYOUT */
        .app {
            display: flex;
            min-height: 100vh;
            background: var(--gray-50);
        }

        /* SIDEBAR */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            display: flex;
            flex-direction: column;
            box-shadow: 4px 0 24px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(212, 175, 55, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 90% 80%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        .sidebar-header {
            padding: 32px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo-icon {
            font-size: 48px;
        }

        .logo h2 {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 2px;
            letter-spacing: -0.5px;
        }

        .logo p {
            font-size: 12px;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        .sidebar-nav {
            flex: 1;
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: relative;
            z-index: 1;
        }

        .sidebar-nav button {
            padding: 14px 20px;
            background: transparent;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: inherit;
        }

        .nav-icon {
            font-size: 20px;
        }

        .sidebar-nav button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar-nav button.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        .sidebar-footer {
            padding: 24px 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
        }

        .user-card {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }

        .user-avatar {
            width: 44px;
            height: 44px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: white;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .user-role {
            font-size: 12px;
            opacity: 0.8;
        }

        .btn-logout {
            width: 100%;
            padding: 12px;
            background: rgba(239, 68, 68, 0.2);
            color: white;
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-family: inherit;
            font-weight: 500;
        }

        .btn-logout:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        /* MAIN CONTENT */
        .main-content {
            flex: 1;
            overflow-y: auto;
            background: var(--gray-50);
        }

        .view-container {
            padding: 40px;
            max-width: 1400px;
            margin: 0 auto;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .view-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 32px;
        }

        .view-header h1 {
            font-size: 36px;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .view-header p {
            color: var(--gray-700);
            font-size: 16px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        /* BUTTONS */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--gray-700);
            border: 1px solid var(--gray-300);
        }

        .btn-secondary:hover {
            background: var(--gray-50);
            border-color: var(--gray-300);
        }

        .btn-ghost {
            background: transparent;
            color: var(--gray-700);
        }

        .btn-ghost:hover {
            background: var(--gray-100);
        }

        /* KPI CARDS */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .kpi-card {
            background: white;
            padding: 28px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid;
            transition: all 0.3s;
        }

        .kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .kpi-card.primary { border-color: var(--primary); }
        .kpi-card.danger { border-color: var(--danger); }
        .kpi-card.success { border-color: var(--success); }
        .kpi-card.warning { border-color: var(--warning); }

        .kpi-icon {
            font-size: 48px;
        }

        .kpi-label {
            font-size: 13px;
            color: var(--gray-700);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .kpi-value {
            font-size: 40px;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 4px;
        }

        .kpi-sub {
            font-size: 13px;
            color: var(--gray-700);
        }

        /* CHARTS */
        .charts-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .chart-card {
            background: white;
            padding: 28px;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .chart-card h3 {
            font-size: 18px;
            color: var(--primary);
            margin-bottom: 24px;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .chart-container.large {
            height: 400px;
        }

        /* RECENT SECTION */
        .recent-section {
            background: white;
            padding: 28px;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .recent-section h3 {
            font-size: 20px;
            color: var(--primary);
            margin-bottom: 24px;
        }

        .feedback-quick-list {
            display: grid;
            gap: 16px;
        }

        .quick-item {
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--gray-200);
            transition: all 0.3s;
            position: relative;
        }

        .quick-item:hover {
            border-color: var(--accent);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.1);
        }

        .quick-item.complaint {
            background: #fef2f2;
            border-color: #fecaca;
        }

        .quick-item.positive {
            background: #f0fdf4;
            border-color: #bbf7d0;
        }

        .quick-item.overdue {
            border-color: var(--danger);
            border-width: 3px;
        }

        .quick-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .quick-date {
            font-size: 13px;
            color: var(--gray-700);
        }

        .quick-item h4 {
            font-size: 17px;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .quick-item p {
            font-size: 14px;
            color: var(--gray-700);
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .quick-meta {
            display: flex;
            gap: 16px;
            font-size: 13px;
            color: var(--gray-700);
            flex-wrap: wrap;
        }

        .overdue-alert {
            margin-top: 12px;
            padding: 8px 12px;
            background: var(--danger);
            color: white;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        /* FILTERS */
        .filters-panel {
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 24px;
        }

        .filter-row {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }

        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 15px;
            font-family: inherit;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .filter-row select,
        .filter-row input[type="date"] {
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 14px;
            font-family: inherit;
        }

        .sort-row {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            color: var(--gray-700);
        }

        .sort-row select {
            padding: 8px 12px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }

        /* FEEDBACKS GRID */
        .feedbacks-grid {
            display: grid;
            gap: 20px;
        }

        .feedback-card {
            background: white;
            padding: 28px;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--gray-300);
            transition: all 0.3s;
            position: relative;
        }

        .feedback-card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .feedback-card.complaint {
            border-left-color: var(--danger);
        }

        .feedback-card.positive {
            border-left-color: var(--success);
        }

        .feedback-card.overdue {
            border-left-width: 6px;
            border-left-color: var(--danger);
        }

        .overdue-ribbon {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--danger);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 700;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-complaint {
            background: #fee2e2;
            color: #991b1b;
        }

        .badge-positive {
            background: #dcfce7;
            color: #166534;
        }

        .badge-status-open {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-status-closed {
            background: #dbeafe;
            color: #1e40af;
        }

        .badge-dept {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .badge-admin {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-user {
            background: #dbeafe;
            color: #1e40af;
        }

        .card-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 8px 12px;
            background: var(--gray-100);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }

        .action-btn:hover {
            background: var(--gray-200);
        }

        .action-btn.danger {
            color: var(--danger);
        }

        .action-btn.danger:hover {
            background: #fee2e2;
        }

        .card-title {
            font-size: 20px;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .card-description {
            font-size: 15px;
            color: var(--gray-700);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--gray-200);
        }

        .card-meta {
            display: flex;
            gap: 16px;
            font-size: 14px;
            color: var(--gray-700);
            flex-wrap: wrap;
        }

        .card-date {
            font-size: 13px;
            color: var(--gray-700);
        }

        /* ANALYTICS */
        .analytics-grid {
            display: grid;
            gap: 24px;
        }

        .analytics-card {
            background: white;
            padding: 28px;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .analytics-card.full-width {
            grid-column: 1 / -1;
        }

        .analytics-card h3 {
            font-size: 20px;
            color: var(--primary);
            margin-bottom: 24px;
        }

        .table-container {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }

        .data-table th {
            font-size: 13px;
            font-weight: 700;
            color: var(--gray-700);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table td {
            font-size: 14px;
            color: var(--gray-700);
        }

        .data-table tr:hover {
            background: var(--gray-50);
        }

        .text-danger { color: var(--danger); }
        .text-success { color: var(--success); }

        .progress-bar {
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 4px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .progress-fill.success {
            background: var(--success);
        }

        .progress-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-700);
        }

        /* USERS */
        .users-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .user-card-item {
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 16px;
            align-items: center;
            transition: all 0.3s;
        }

        .user-card-item:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .user-avatar-large {
            width: 64px;
            height: 64px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 700;
            color: white;
        }

        .user-details {
            flex: 1;
        }

        .user-details h3 {
            font-size: 18px;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .user-details p {
            font-size: 14px;
            color: var(--gray-700);
            margin-bottom: 8px;
        }

        .user-actions {
            display: flex;
            gap: 8px;
        }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .modal-header {
            padding: 28px 32px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 24px;
            color: var(--primary);
        }

        .close-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: var(--gray-100);
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-700);
        }

        .close-btn:hover {
            background: var(--gray-200);
        }

        .modal-form {
            padding: 32px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 8px;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .app {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
            }

            .view-container {
                padding: 24px;
            }

            .view-header {
                flex-direction: column;
                gap: 16px;
            }

            .header-actions {
                width: 100%;
                flex-direction: column;
            }

            .kpi-grid,
            .charts-row,
            .users-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .filter-row {
                flex-direction: column;
            }

            .search-input {
                min-width: 100%;
            }
        }
    </style>
</body>
</html>
